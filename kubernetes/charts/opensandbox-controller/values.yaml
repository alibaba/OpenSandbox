# Default values for opensandbox-controller.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Override the name of the chart
nameOverride: ""
# -- Override the full name of the chart
fullnameOverride: ""

# -- Override the namespace where resources will be created
# If not set, defaults to "opensandbox-system"
namespaceOverride: ""

# Controller configuration
controller:
  # -- Controller image configuration
  image:
    # -- Controller image repository
    repository: sandbox-registry.cn-zhangjiakou.cr.aliyuncs.com/opensandbox/controller
    # -- Image pull policy
    pullPolicy: IfNotPresent
    # -- Overrides the image tag whose default is the chart appVersion
    tag: ""
  
  # -- Number of controller replicas
  replicaCount: 1
  
  # -- Resource requests and limits for the controller
  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi
  
  # -- Log level (0-5, higher is more verbose)
  logLevel: 3
  
  # -- Enable leader election for controller manager
  leaderElection:
    enabled: true
  
  # -- Liveness probe configuration
  livenessProbe:
    enabled: true
    httpGet:
      path: /healthz
      port: 8081
    initialDelaySeconds: 15
    periodSeconds: 20
    timeoutSeconds: 1
    successThreshold: 1
    failureThreshold: 3
  
  # -- Readiness probe configuration
  readinessProbe:
    enabled: true
    httpGet:
      path: /readyz
      port: 8081
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 1
    successThreshold: 1
    failureThreshold: 3
  
  # -- Node labels for controller pod assignment
  nodeSelector: {}
  
  # -- Tolerations for controller pod assignment
  tolerations: []
  
  # -- Affinity for controller pod assignment
  affinity: {}
  
  # -- Pod security context
  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  
  # -- Container security context
  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - "ALL"
    readOnlyRootFilesystem: false
  
  # -- Additional labels for controller pods
  podLabels: {}
  
  # -- Additional annotations for controller pods
  podAnnotations: {}
  
  # -- Priority class name for controller pods
  priorityClassName: ""

# -- Image pull secrets for private registries
imagePullSecrets: []
# - name: myregistrykey

# ServiceAccount configuration
serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# RBAC configuration
rbac:
  # -- Specifies whether RBAC resources should be created
  create: true

# CRD configuration
crds:
  # -- Specifies whether CRDs should be installed
  install: true
  # -- Keep CRDs on chart uninstall (adds helm.sh/resource-policy: keep annotation)
  keep: true
  # -- Additional annotations to add to CRDs (will be merged with resource-policy if keep is true)
  annotations: {}

# Network Policy configuration
networkPolicy:
  # -- Enable network policy
  enabled: false
  # -- Ingress rules for network policy
  ingress: []
  # -- Egress rules for network policy
  egress: []

# -- Additional environment variables for the controller
extraEnv: []
# - name: CUSTOM_VAR
#   value: "custom-value"

# -- Additional volumes for the controller
extraVolumes: []
# - name: custom-volume
#   emptyDir: {}

# -- Additional volume mounts for the controller
extraVolumeMounts: []
# - name: custom-volume
#   mountPath: /custom-path

# -- Additional init containers
extraInitContainers: []

# -- Additional sidecar containers
extraContainers: []

# Example values for different environments
# You can create separate values files for different environments:
# - values-dev.yaml
# - values-staging.yaml
# - values-prod.yaml
